devtools::install("../rapbase/.")
devtools::install(upgrade = FALSE, dependencies = FALSE)

Sys.setenv(FALK_EXTENDED_USER_RIGHTS="[{\"A\":80,\"R\":\"LU\",\"U\":601225},{\"A\":80,\"R\":\"SC\",\"U\":4211928},{\"A\":80,\"R\":\"SC\",\"U\":601225}]")
Sys.setenv(R_RAP_INSTANCE="QAC")
Sys.setenv(R_RAP_CONFIG_PATH="/home/rstudio/norgast/data-raw/config")
Sys.setenv(MYSQL_DB_DATA="NoRGastReportDataStaging")

norgast::norgastApp()

RegData <- rapbase::loadRegData(
  registryName = "data",
  query="SELECT * FROM eq5dlformdatacontract",
  dbType="mysql")

tmp_yml <- yaml::read_yaml("./dev/test.yml")
tmp_json <- jsonlite::serializeJSON(tmp_yml)
query <- paste0("INSERT INTO `autoreport` VALUES ('", tmp_json, "');")

con <- rapbase::rapOpenDbConnection("autoreport")$con
DBI::dbExecute(con, query)
rapbase::rapCloseDbConnection(con)
